# TiMOS-B-23.4.R3 both/hops Nokia 7705 SAR Copyright (c) 2000-2023 Nokia.
# All rights reserved. All use subject to applicable license agreements.
# Built on Tue Aug 29 08:21:22 PDT 2023 by builder in /builds/F234B/R3/panos/main

# Generated WED FEB 26 19:51:18 2025 UTC

exit all
configure
#--------------------------------------------------
echo "System Configuration"
#--------------------------------------------------
    system
        name "SAR-Hc-244"
        dns
        exit
        ptp
            clock csm
                profile g8275dot1-2014
            exit
        exit
        snmp
            packet-size 9216
        exit
        time
            ntp
                server 10.14.132.241 prefer
                server 10.14.132.242
                server 172.20.208.155
                server 172.20.208.156
                server 216.239.35.0
                no shutdown
            exit
            sntp
                shutdown
            exit
            zone UTC 
        exit
        thresholds
            rmon
            exit
        exit
        lldp
            tx-interval 10
            tx-hold-multiplier 2
            reinit-delay 5
            notification-interval 10
            tx-credit-max 20
            message-fast-tx 100
        exit
    exit
#--------------------------------------------------
echo "System Security Configuration"
#--------------------------------------------------
    system
        security
            ftp-server
            management-access-filter
                ip-filter
                    shutdown
                    default-action permit
                    entry 10
                        description "test entry"
                        src-ip 10.144.0.0/21
                        action permit
                    exit
                    entry 20
                        description "test entry"
                        src-ip 10.152.0.0/20
                        action permit
                    exit
                    no shutdown
                exit
            exit
            password
                attempts 6 time 5 lockout 1
                health-check interval 600
                admin-password "$2y$10$qVotbF8VrMwGmuFnCBbyU.c.xT7bz9h5IuuDsterOTongwqRQ7K9u"
            exit
            radius
                authorization
                retry 4
                timeout 5
                server 1 address 172.20.208.159 secret "9Jt6uqZw3GsD3rwjUb7NlrPPwykd7ayqqiyS2TF6" hash2
            exit
            user "admin"
                password "$2y$10$AWOSS0rR.6TSEH4PrrHg..pJHbs9chucNTIVgvCv4Pksq/mQrNscC"
                access console ftp snmp 
                home-directory "cf3:\"
                console
                    member "administrative"
                exit
            exit
            user "ftp"
                password "$2y$10$zEwAG0SvcTT8JmSmDRUw6.bG8XtGIpJceYYia8cLkxHDIJC5PyCIi"
                access ftp 
                home-directory "cf3:\"
            exit
            user "sam_SNMPv3"
                password "$2y$10$MfZi4tU22uLJdcmDs18CU.s7mLsiG75FjcnYFBMnBAkXihCd1ujIa"
                access console snmp 
                snmp
                    authentication hash2 hmac-sha1-96 IqgYII8+6ZSsWXgAxogoh+xct4rV7sxzcjglDRkMt63jTsp0 privacy cbc-des gGPkUYH2s2EsDlwbHs2lCgXV8+a7EZq4xLVaQ1WsLyc=
                    group "SNMPv3_group"
                exit
            exit
            snmp
                access group "SNMPv3_group" security-model usm security-level privacy read "iso" write "iso" notify "iso"
                access group "SNMPv3_group" security-model usm security-level privacy context "vprn" prefix read "vprn-view" write "vprn-view" notify "iso"
            exit
            ssh
                preserve-key
            exit
        exit
    exit
#--------------------------------------------------
echo "System Login Control Configuration"
#--------------------------------------------------
    system
        login-control
            pre-login-message "|-----------------------------------------------------------------|\n| WARNING: Lab Unit Netnordic|\n| |\n|-----------------------------------------------------------------|\n"
        exit
    exit
#--------------------------------------------------
echo "Log Configuration"
#--------------------------------------------------
    log 
        snmp-trap-group 98
            description "5620sam"
            trap-target "000C29AA0275:main1" address 10.14.10.14 snmpv3 notify-community "sam_SNMPv3" security-level privacy
        exit 
        log-id 42
            from debug-trace 
            to memory
            no shutdown
        exit
        log-id 98
            from main security 
            to snmp 1024
            no shutdown
        exit
    exit 
#--------------------------------------------------
echo "System Security Cpm Hw Filters and PKI Configuration"
#--------------------------------------------------
    system
        security
        exit
    exit
#--------------------------------------------------
echo "VLAN-Filter Configuration"
#--------------------------------------------------
    filter
    exit
#--------------------------------------------------
echo "Group Encryption Configuration"
#--------------------------------------------------
    group-encryption
        group-encryption-label 34
        encryption-keygroup 1 create
            description "Key Group 1"
            keygroup-name "Key Group 1 vprn 330"
            esp-auth-algorithm sha512
            esp-encryption-algorithm aes256
            security-association spi 1 authentication-key 0xd3b7b7243d42409c755e3ca14bdde9eaac570f24cccd8aaa6a113f09ef71f23d6043c0fcdaf016ccf5be927298c4e20a86ecec0eaca821172172573a37844385611c0f1da1b0985a290ddcbfc7f84ffa encryption-key 0xf2eec9a220525e0a539bd03756e37f24dbe0702169befc51d8156cedd8f015241d14e9d7d69a08e9eed15b645b784c40 crypto
            active-outbound-sa 1
        exit
        encryption-keygroup 2 create
            description "Key Group 2"
            keygroup-name "Key Group 2 vprn 330"
            security-association spi 2 authentication-key 0xd26cb34439fe5b9e972e77ca83e672eb5ccf6f92f2f082147f7922f1c6447374c6902b1167087fc4123ca517c75157c5 encryption-key 0xbe3389295f4600f3f65132f159ff3b52426a728d001e8c675c30c0f61038bd2d crypto
            active-outbound-sa 2
        exit
    exit
#--------------------------------------------------
echo "QoS Policy Configuration"
#--------------------------------------------------
    qos
        network-queue "NQ" create
            description "Default network queue QoS policy."
            queue 1 create
                high-prio-only 10
            exit
            queue 2 create
                rate 100 cir 25
                cbs 0.25
                high-prio-only 10
            exit
            queue 3 create
                rate 10
                cbs 0.75
                high-prio-only 10
            exit
            queue 4 create
                rate 100 cir 25
                mbs 2.50
                cbs 0.25
                high-prio-only 10
            exit
            queue 5 create
                rate 100 cir 100
                cbs 0.75
                high-prio-only 10
            exit
            queue 6 create
                rate 100 cir 100
                cbs 0.75
                high-prio-only 10
            exit
            queue 7 create
                rate 100 cir 10
                mbs 2.50
                cbs 0.25
                high-prio-only 10
            exit
            queue 8 create
                rate 100 cir 10
                mbs 2.50
                cbs 0.25
                high-prio-only 10
            exit
            queue 9 multipoint create
                high-prio-only 10
            exit
            queue 10 multipoint create
                rate 100 cir 5
                high-prio-only 10
            exit
            queue 11 multipoint create
                rate 100 cir 5
                high-prio-only 10
            exit
            queue 12 multipoint create
                rate 100 cir 5
                mbs 2.50
                high-prio-only 10
            exit
            queue 13 multipoint create
                rate 100 cir 100
                high-prio-only 10
            exit
            queue 14 multipoint create
                rate 100 cir 100
                high-prio-only 10
            exit
            queue 15 multipoint create
                rate 100 cir 10
                mbs 2.50
                high-prio-only 10
            exit
            queue 16 multipoint create
                rate 100 cir 10
                mbs 2.50
                high-prio-only 10
            exit
            fc af create
                multicast-queue 11
                queue 3
            exit
            fc be create
                multicast-queue 9
                queue 1
            exit
            fc ef create
                multicast-queue 14
                queue 6
            exit
            fc h1 create
                multicast-queue 15
                queue 7
            exit
            fc h2 create
                multicast-queue 13
                queue 5
            exit
            fc l1 create
                multicast-queue 12
                queue 4
            exit
            fc l2 create
                multicast-queue 10
                queue 2
            exit
            fc nc create
                multicast-queue 16
                queue 8
            exit
        exit
    exit
#--------------------------------------------------
echo "QoS Policy Configuration"
#--------------------------------------------------
    qos
        sap-ingress 12 create
            queue 1 create
            exit
            queue 2 expedite create
            exit
            queue 3 expedite create
            exit
            fc "be" create
                queue 1
            exit
            fc "ef" create
                queue 2
                de-1-out-profile
            exit
            fc "h1" create
                queue 3
            exit
            default-priority high
        exit
        sap-ingress 13 create
            queue 1 create
            exit
            queue 2 create
            exit
            fc "h1" create
                queue 2
            exit
            default-fc "h1"
            default-priority high
        exit
        sap-ingress 55 create
            queue 1 create
            exit
            default-fc "l2"
            default-priority high
        exit
        sap-ingress 300 create
            queue 1 create
            exit
            queue 2 create
            exit
            queue 3 create
            exit
            queue 4 create
            exit
            queue 5 create
            exit
            fc "af" create
                queue 4
            exit
            fc "be" create
                queue 1
            exit
            fc "ef" create
                queue 3
            exit
            fc "h2" create
                queue 2
                broadcast-queue 2
                multicast-queue 2
                unknown-queue 2
            exit
            fc "nc" create
                queue 5
            exit
            default-fc "h2"
            default-priority high
        exit
        sap-ingress 999 create
            queue 1 create
            exit
            queue 2 create
            exit
            fc "ef" create
                queue 2
            exit
        exit
        sap-egress 12 create
            queue 1 create
            exit
            queue 6 create
            exit
            queue 7 create
            exit
            queue 8 create
            exit
            fc ef create
                queue 6
                dscp ef
            exit 
            fc h1 create
                queue 7
                dscp nc1
            exit 
        exit
        sap-egress 900 create
            policy-name "Hafslund-SAP-Egress-QoS"
            description "Hafslund-Sap-Egress-QoS-07012016"
            queue 1 create
            exit
            queue 2 create
            exit
            queue 3 create
            exit
            queue 4 create
            exit
            queue 5 create
            exit
            queue 6 create
            exit
            queue 7 create
            exit
            queue 8 create
            exit
            fc af create
                queue 3
                dscp in-profile af11 out-profile af12
            exit 
            fc be create
                queue 1
                dscp be
            exit 
            fc ef create
                queue 6
                dscp ef
            exit 
            fc h1 create
                queue 7
                dscp nc1
            exit 
            fc h2 create
                queue 5
                dscp in-profile af41 out-profile af42
            exit 
            fc l1 create
                queue 4
                dscp in-profile af21 out-profile af22
            exit 
            fc l2 create
                queue 2
                dscp cs1
            exit 
            fc nc create
                queue 8
                dscp nc2
            exit 
        exit
        mc-mlppp
        exit
        network 2 create
            description "Default network QoS policy."
            ingress
                dscp be fc be profile out
                dscp ef fc ef profile in
                dscp cs1 fc l2 profile in
                dscp nc1 fc h1 profile in
                dscp nc2 fc nc profile in
                dscp af11 fc af profile in
                dscp af12 fc af profile out
                dscp af13 fc af profile out
                dscp af21 fc l1 profile in
                dscp af22 fc l1 profile out
                dscp af23 fc l1 profile out
                dscp af31 fc l1 profile in
                dscp af32 fc l1 profile out
                dscp af33 fc l1 profile out
                dscp af41 fc h2 profile in
                dscp af42 fc h2 profile out
                dscp af43 fc h2 profile out
                lsp-exp 0 fc be profile out
                lsp-exp 1 fc l2 profile in
                lsp-exp 2 fc af profile out
                lsp-exp 3 fc af profile in
                lsp-exp 4 fc h2 profile in
                lsp-exp 5 fc ef profile in
                lsp-exp 6 fc h1 profile in
                lsp-exp 7 fc nc profile in
            exit
            egress
                fc ef
                    dscp-out-profile nc1
                exit
            exit
        exit
        network 10 create
            ingress
                default-action fc l1 profile in
            exit
            egress
            exit
        exit
        network 12 create
            description "Default network QoS policy."
            ingress
                dscp be fc be profile out
                dscp ef fc ef profile in
                dscp cs1 fc l2 profile in
                dscp nc1 fc h1 profile in
                dscp nc2 fc nc profile in
                dscp af11 fc af profile in
                dscp af12 fc af profile out
                dscp af13 fc af profile out
                dscp af21 fc l1 profile in
                dscp af22 fc l1 profile out
                dscp af23 fc l1 profile out
                dscp af31 fc l1 profile in
                dscp af32 fc l1 profile out
                dscp af33 fc l1 profile out
                dscp af41 fc h2 profile in
                dscp af42 fc h2 profile out
                dscp af43 fc h2 profile out
                lsp-exp 0 fc be profile out
                lsp-exp 1 fc l2 profile in
                lsp-exp 2 fc af profile out
                lsp-exp 3 fc af profile in
                lsp-exp 4 fc h2 profile in
                lsp-exp 5 fc ef profile in
                lsp-exp 6 fc h1 profile in
                lsp-exp 7 fc nc profile in
            exit
            egress
            exit
        exit
        network 88 create
            ingress
                default-action fc ef profile in
            exit
            egress
                fc be
                    dscp-in-profile ef
                    lsp-exp-in-profile 5
                exit
            exit
        exit
        network 99 create
            ingress
            exit
            egress
            exit
        exit
        network 900 create
            description "Hafslund-Core-QoS-07012016"
            ingress
                dscp be fc be profile out
                dscp ef fc ef profile in
                dscp cs1 fc l2 profile in
                dscp nc1 fc h1 profile in
                dscp nc2 fc nc profile in
                dscp af11 fc af profile in
                dscp af12 fc af profile out
                dscp af13 fc af profile out
                dscp af21 fc l1 profile in
                dscp af22 fc l1 profile out
                dscp af23 fc l1 profile out
                dscp af31 fc l1 profile in
                dscp af32 fc l1 profile out
                dscp af33 fc l1 profile out
                dscp af41 fc h2 profile in
                dscp af42 fc h2 profile out
                dscp af43 fc h2 profile out
                lsp-exp 0 fc be profile out
                lsp-exp 1 fc l2 profile in
                lsp-exp 2 fc af profile out
                lsp-exp 3 fc af profile in
                lsp-exp 4 fc h2 profile in
                lsp-exp 5 fc ef profile in
                lsp-exp 6 fc h1 profile in
                lsp-exp 7 fc nc profile in
            exit
            egress
                fc ef
                    dscp-out-profile nc1
                exit
            exit
        exit
    exit
#--------------------------------------------------
echo "Card Configuration"
#--------------------------------------------------
    card 1
        card-type iom-sar
        mda 1
            mda-type i6-1gb
            no shutdown
        exit
        mda 2
            mda-type i2-sdi
            no shutdown
        exit
        no shutdown
    exit
#--------------------------------------------------
echo "Port Configuration"
#--------------------------------------------------
    port 1/1/1
        description "UPLINK"
        ethernet
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                exit
            exit
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/1/2
        description "To SAR-8-241 - 1/1/2"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 2000
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/1/3
        description "To SAR-8-242 - 1/1/7"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 2000
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
            phy-tx-clock slave
        exit
        no shutdown
    exit
    port 1/1/4
        description "To SAR-8-241 - 1/1/1"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 2000
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
            phy-tx-clock slave
        exit
        no shutdown
    exit
    port 1/1/5
        description "LAB MGMT"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 1518
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/1/6
        description "To SAR-Hc-243 - 1/1/6"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 2000
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/2/1
        serial
            rs232
                socket 1
                    no shutdown
                exit
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/2/2
        shutdown
        serial
        exit
    exit
#--------------------------------------------------
echo "External Alarm Configuration"
#--------------------------------------------------
    external-alarms
    exit
#--------------------------------------------------
echo "Filter Configuration"
#--------------------------------------------------
    filter 
        ip-filter 10 create
            filter-name "SAP-QoS-Classification" 
            default-action forward
            description "SAP-QoS-Classification-07012016" 
            entry 16 create
                description "Digi Realport" 
                match protocol tcp
                    dst-port eq 771
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 18 create
                description "Digi Realport" 
                match protocol tcp
                    src-port eq 771
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 20 create
                description "IEC 104" 
                match protocol tcp
                    dst-port eq 2404
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 21 create
                description "IEC 104" 
                match protocol tcp
                    src-port eq 2404
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 22 create
                description "FROM_SCADA_AB" 
                match protocol ip
                    src-ip 10.145.0.0/16
                exit 
                action
                    forward fc h2
                exit
            exit 
            entry 23 create
                description "TO_SCADA_AB" 
                match protocol ip
                    dst-ip 10.145.0.0/16
                exit 
                action
                    forward fc h2
                exit
            exit 
            entry 24 create
                description "FROM_SCADA_OSLO" 
                match 
                    src-ip 10.153.0.0/16
                exit 
                action
                    forward fc h2
                exit
            exit 
            entry 25 create
                description "TO_SCADA_OSLO" 
                match 
                    dst-ip 10.153.0.0/16
                exit 
                action
                    forward fc h2
                exit
            exit 
            entry 34 create
                description "SSH" 
                match protocol tcp
                    dst-port eq 22
                exit 
                action
                    forward fc af
                exit
            exit 
            entry 35 create
                description "SSH" 
                match protocol tcp
                    src-port eq 22
                exit 
                action
                    forward fc af
                exit
            exit 
            entry 36 create
                description "RADIUS" 
                match protocol udp
                    dst-port eq 1812
                exit 
                action
                    forward fc af
                exit
            exit 
            entry 40 create
                description "DSCP_EF" 
                match 
                    dscp ef 
                exit 
                action
                    forward fc l1
                exit
            exit 
            entry 41 create
                description "DSCP_AF41" 
                match 
                    dscp af41 
                exit 
                action
                    forward fc l1
                exit
            exit 
            entry 42 create
                description "VoIP traffic" 
                match protocol udp
                    dst-port range 16834 32767
                exit 
                action
                    forward fc l1
                exit
            exit 
            entry 43 create
                description "SIP VoIP Signalling TCP" 
                match protocol tcp
                    dst-port range 5060 5061
                exit 
                action
                    forward fc l1
                exit
            exit 
            entry 44 create
                description "SIP VoIP Signalling CUP" 
                match protocol udp
                    dst-port range 5060 5061
                exit 
                action
                    forward fc l1
                exit
            exit 
            entry 100 create
                description "Default for remaining traffic" 
                action
                    forward fc be
                exit
            exit 
        exit 
        ip-filter 12 create
            default-action forward
            entry 8 create
                description "SSH" 
                match protocol tcp
                    dst-port eq 22
                exit 
                action
                    forward fc h1 priority high
                exit
            exit 
            entry 10 create
                match protocol udp
                    dst-port eq 2404
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 11 create
                match protocol udp
                    src-port eq 2404
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 100 create
                description "Default for remaining traffic" 
                action
                    forward fc be
                exit
            exit 
        exit 
        ip-filter 13 create
            default-action forward
            entry 8 create
                description "SSH" 
                match protocol tcp
                    dst-port eq 22
                exit 
                action
                    forward fc h1 priority high
                exit
            exit 
            entry 100 create
                description "Default for remaining traffic" 
                action
                    forward fc be
                exit
            exit 
        exit 
    exit 
#--------------------------------------------------
echo "Network Security Configuration"
#--------------------------------------------------
    security
        logging
        exit
        begin
        commit
    exit
#--------------------------------------------------
echo "Management Router Configuration"
#--------------------------------------------------
    router management
    exit

#--------------------------------------------------
echo "Router (Network Side) Configuration"
#--------------------------------------------------
    router Base
        dhcp
            local-dhcp-server "Netrounds" create
            exit
        exit
        if-attribute
            admin-group "blue" value 6
            admin-group "green" value 4
            admin-group "red" value 5
        exit
        route-next-hop-policy
            begin
            template "Test"
            exit
            commit
        exit
        interface "To-SAR-8-241"
            address 10.14.132.137/30
            port 1/1/4:10
            bfd 10 receive 10 multiplier 3 type np
            no shutdown
        exit
        interface "To-SAR-8-241-p-1-1-2"
            address 10.14.132.130/30
            port 1/1/2:10
            bfd 10 receive 10 multiplier 3 type np
            no shutdown
        exit
        interface "To-SAR-8-242"
            address 10.14.0.14/30
            port 1/1/3:14
            bfd 10 receive 10 multiplier 3 type np
            no shutdown
        exit
        interface "To-SAR-Hc-243"
            address 10.14.0.10/30
            port 1/1/6:13
            bfd 10 receive 10 multiplier 3 type np
            no shutdown
        exit
        interface "system"
            address 10.14.132.244/32
            bfd 100 receive 100 multiplier 3
            no shutdown
        exit
        autonomous-system 65200
        router-id 10.14.132.244
#--------------------------------------------------
echo "Static Route Configuration"
#--------------------------------------------------
        static-route-entry 0.0.0.0/0
            next-hop 10.14.10.1
                preference 1
                no shutdown
            exit
        exit
#--------------------------------------------------
echo "SGT Mapping Configuration"
#--------------------------------------------------
        sgt-qos
            application bgp dscp nc2 fc-queue nc profile in
            application icmp dscp be fc-queue l2 profile in
            application ldp dscp nc2 fc-queue nc profile in
            application rsvp dscp nc2 fc-queue nc profile in
            application ssh dscp nc1 fc-queue h1 profile in
            application isis dot1p 7 fc-queue nc profile in
            dscp be fc be
        exit
#--------------------------------------------------
echo "MPLS Label Range Configuration"
#--------------------------------------------------
        mpls-labels
            sr-labels start 20000 end 20999
        exit
#--------------------------------------------------
echo "OSPFv2 Configuration"
#--------------------------------------------------
        ospf
            shutdown
            asbr
            reference-bandwidth 1000000
            export "export-igp"
        exit
#--------------------------------------------------
echo "ISIS Configuration"
#--------------------------------------------------
        isis 0
            level-capability level-2
            area-id 49.0144
            overload-on-boot timeout 60
            export "export-igp"
            traffic-engineering
            advertise-router-capability area
            loopfree-alternates
                remote-lfa
                exit
                ti-lfa
                exit
            exit
            level 1
                wide-metrics-only
            exit
            level 2
                wide-metrics-only
            exit
            interface "system"
                ipv4-node-sid index 244
                no shutdown
            exit
            interface "To-SAR-8-241"
                no shutdown
            exit
            interface "To-SAR-Hc-243"
                no shutdown
            exit
            interface "To-SAR-8-242"
                bfd-enable ipv4
                no shutdown
            exit
            interface "To-SAR-8-241-p-1-1-2"
                no shutdown
            exit
            segment-routing
                prefix-sid-range global
                no shutdown
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "MPLS Configuration"
#--------------------------------------------------
        mpls
            admin-group-frr
            cspf-on-loose-hop
            interface "system"
                no shutdown
            exit
            interface "To-SAR-8-241"
                admin-group "blue"
                no shutdown
            exit
            interface "To-SAR-Hc-243"
                no shutdown
            exit
            interface "To-SAR-8-241-p-1-1-2"
                no shutdown
            exit
        exit
#--------------------------------------------------
echo "RSVP Configuration"
#--------------------------------------------------
        rsvp
            interface "system"
                no shutdown
            exit
            interface "To-SAR-8-241"
                bfd-enable
                no shutdown
            exit
            interface "To-SAR-Hc-243"
                bfd-enable
                no shutdown
            exit
            interface "To-SAR-8-241-p-1-1-2"
                bfd-enable
                no shutdown
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "MPLS LSP Configuration"
#--------------------------------------------------
        mpls
            path "DEFAULT"
                no shutdown
            exit
            path "PRIMARY"
                no shutdown
            exit
            path "STANDBY"
                no shutdown
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "LDP Configuration"
#--------------------------------------------------
        ldp
            interface-parameters
                interface "To-SAR-8-241" dual-stack
                    ipv4
                        no shutdown
                    exit
                    no shutdown
                exit
                interface "To-SAR-Hc-243" dual-stack
                    ipv4
                        no shutdown
                    exit
                    no shutdown
                exit
                interface "To-SAR-8-242" dual-stack
                    ipv4
                        no shutdown
                    exit
                    no shutdown
                exit
                interface "To-SAR-8-241-p-1-1-2" dual-stack
                    ipv4
                        no shutdown
                    exit
                    no shutdown
                exit
            exit
            targeted-session
                peer 10.14.132.241
                    no shutdown
                exit
            exit
            no shutdown
        exit
    exit

#--------------------------------------------------
echo "Service Configuration"
#--------------------------------------------------
    service
        customer 1 create
            description "Default customer"
        exit
        vprn 50 customer 1 create
            interface "testloop" create
            exit
        exit
        vprn 100 customer 1 create
            interface "TO-NE20" create
            exit
            interface "TO-HUA-IES" create
            exit
        exit
        ies 200 customer 1 create
            interface "TO-241-IES-200" create
            exit
        exit
        vprn 300 customer 1 create
            interface "SIMULATE" create
            exit
        exit
        vprn 310 customer 1 create
            interface "scada310" create
            exit
        exit
        vprn 330 customer 1 create
            interface "scada330" create
            exit
        exit
        ies 400 customer 1 create
            interface "TO-HUALAB" create
            exit
        exit
        ies 900 customer 1 create
            interface "UPLINK_IES" create
            exit
        exit
        vprn 50 customer 1 create
            route-distinguisher 10.14.132.244:50
            auto-bind-tunnel
                resolution-filter
                    sr-isis
                    sr-te
                exit
                resolution filter
            exit
            vrf-target export target:65535:50 import target:65535:50
            interface "testloop" create
                address 10.14.132.244/32
                loopback
            exit
            no shutdown
        exit
        vprn 100 customer 1 create
            vrf-import "100-HUB-IMPORT"
            vrf-export "100-HUB-EXPORT"
            autonomous-system 65200
            route-distinguisher 10.14.132.244:100
            auto-bind-tunnel
                resolution-filter
                    ldp
                    rsvp
                exit
                resolution any
            exit
            enable-bgp-vpn-backup ipv4
            interface "TO-NE20" create
                address 10.14.2.38/30
                sap 1/1/2:0 create
                exit
            exit
            interface "TO-HUA-IES" create
            exit
            bgp
                local-as 65200
                backup-path ipv4
                group "FG"
                    neighbor 10.14.2.37
                        description "Mot NE20-Core1"
                        keepalive 3
                        hold-time 9
                        import "FG-Import" 
                        export "FG-Export" 
                        peer-as 65500
                    exit
                exit
                no shutdown
            exit
            no shutdown
        exit
        ies 200 customer 1 create
            interface "TO-241-IES-200" create
                address 192.168.200.2/30
                sap 1/1/4:200 create
                exit
            exit
            no shutdown
        exit
        vprn 300 customer 1 create
            vrf-import "SCADA1-FROM-HUB"
            vrf-export "SCADA1-FROM-CPE"
            route-distinguisher 10.14.132.244:300
            auto-bind-tunnel
                resolution-filter
                    ldp
                    rsvp
                exit
                resolution any
            exit
            interface "SIMULATE" create
                address 20.0.0.4/32
                loopback
            exit
            bgp
                no shutdown
            exit
            no shutdown
        exit
        vprn 310 customer 1 create
            route-distinguisher 10.0.0.244:310
            auto-bind-tunnel
                resolution-filter
                    ldp
                exit
                resolution any
            exit
            vrf-target export target:65400:3101 import target:65400:3100
            interface "scada310" create
                address 30.0.0.244/32
                loopback
            exit
            no shutdown
        exit
        vprn 330 customer 1 create
            route-distinguisher 10.0.0.244:330
            auto-bind-tunnel
                resolution-filter
                    ldp
                exit
                resolution any
            exit
            vrf-target target:65200:330
            interface "scada330" create
                address 33.0.0.244/32
                loopback
            exit
            no shutdown
        exit
        ies 400 customer 1 create
            interface "TO-HUALAB" create
                address 172.16.100.1/30
                sap 1/1/2:400 create
                exit
            exit
            no shutdown
        exit
        ies 900 customer 1 create
            interface "UPLINK_IES" create
                address 10.14.10.220/24
                sap 1/1/1 create
                exit
            exit
            no shutdown
        exit
    exit
#--------------------------------------------------
echo "Router (Service Side) Configuration"
#--------------------------------------------------
    router Base
#--------------------------------------------------
echo "OSPFv2 Configuration"
#--------------------------------------------------
        ospf
            shutdown
        exit
#--------------------------------------------------
echo "ISIS Configuration"
#--------------------------------------------------
        isis 0
            no shutdown
        exit
#--------------------------------------------------
echo "Policy Configuration"
#--------------------------------------------------
        policy-options
            begin
            prefix-list "All"
                prefix 0.0.0.0/0 longer
            exit
            prefix-list "default"
                prefix 0.0.0.0/0 exact
            exit
            community "SCADA1-COMM" members "target:65200:300"
            community "100-MAIN-COMM" members "target:65200:100"
            community "VPRN310-EXPORT" members "target:65400:3101"
            community "VPRN310-IMPORT" members "target:65400:3100"
            community "100-HUB-EXPORT-COMM" members "target:65200:100" "target:65200:10010"
            community "100-HUB-IMPORT-COMM" members "target:65200:10020"
            community "SCADA1-FROM-CPE-COMM" members "target:65200:30020"
            community "SCADA1-FROM-HUB-COMM" members "target:65200:30010"
            policy-statement "FG-Export"
                entry 10
                    from
                        protocol bgp-vpn
                    exit
                    to
                        protocol bgp
                    exit
                    action accept
                        as-path-prepend 65200 1
                    exit
                exit
                entry 20
                    from
                        protocol direct
                    exit
                    to
                        protocol bgp
                    exit
                    action accept
                        as-path-prepend 65200 1
                    exit
                exit
                entry 30
                    from
                        protocol aggregate
                    exit
                    to
                        protocol bgp
                    exit
                    action accept
                        as-path-prepend 65200 1
                    exit
                exit
                entry 40
                    action reject
                exit
            exit
            policy-statement "FG-Import"
                entry 10
                    from
                        protocol bgp
                        prefix-list "All"
                    exit
                    action accept
                        local-preference 140
                    exit
                exit
            exit
            policy-statement "direct-bgp"
                entry 10
                    from
                        protocol direct
                    exit
                    to
                        protocol bgp-vpn
                    exit
                    action accept
                    exit
                exit
            exit
            policy-statement "export-igp"
                entry 5
                    from
                        external
                    exit
                exit
                entry 10
                    from
                        protocol isis
                    exit
                    action accept
                    exit
                exit
                entry 20
                    from
                        protocol ospf
                    exit
                    action accept
                    exit
                exit
                entry 30
                    from
                        protocol direct
                    exit
                    action accept
                    exit
                exit
                entry 40
                    from
                        protocol static
                    exit
                    action accept
                    exit
                exit
                default-action accept
                exit
            exit
            policy-statement "direct-isis"
                entry 10
                    from
                        protocol static
                    exit
                    to
                        protocol isis
                    exit
                    action accept
                    exit
                exit
            exit
            policy-statement "iBGP Export"
                entry 10
                    from
                        prefix-list "default"
                    exit
                    action accept
                        local-preference 150
                    exit
                exit
            exit
            policy-statement "IES-TO-GLOBAL"
                entry 15
                    from
                        protocol direct
                    exit
                    to
                        protocol bgp
                    exit
                    action accept
                        local-preference 110
                    exit
                exit
                entry 20
                    from
                        protocol static
                    exit
                    to
                        protocol bgp
                    exit
                exit
            exit
            policy-statement "100-HUB-EXPORT"
                entry 10
                    action accept
                        community add "100-HUB-EXPORT-COMM"
                    exit
                exit
                entry 20
                    action accept
                        community add "100-MAIN-COMM"
                    exit
                exit
                entry 30
                    from
                        prefix-list "default"
                    exit
                    action accept
                        local-preference 150
                    exit
                exit
            exit
            policy-statement "100-HUB-IMPORT"
                entry 10
                    from
                        community "100-HUB-IMPORT-COMM"
                    exit
                    action accept
                    exit
                exit
                entry 20
                    from
                        community "100-MAIN-COMM"
                    exit
                    action accept
                    exit
                exit
            exit
            policy-statement "VPRN310-EXPORT"
                entry 10
                    action accept
                        community add "VPRN310-EXPORT"
                    exit
                exit
            exit
            policy-statement "VPRN310-IMPORT"
                entry 10
                    from
                        community "VPRN310-IMPORT"
                    exit
                    action accept
                    exit
                exit
            exit
            policy-statement "SCADA1-FROM-CPE"
                entry 10
                    action accept
                        community add "SCADA1-FROM-CPE-COMM"
                    exit
                exit
            exit
            policy-statement "SCADA1-FROM-HUB"
                entry 10
                    from
                        community "SCADA1-FROM-HUB-COMM"
                    exit
                    action accept
                    exit
                exit
            exit
            commit
        exit
#--------------------------------------------------
echo "BGP Configuration"
#--------------------------------------------------
        bgp
            add-paths
                vpn-ipv4 send 2 receive
            exit
            backup-path ipv4
            next-hop-resolution
                label-route-transport-tunnel
                    family label-ipv4
                        resolution-filter
                            ldp
                        exit
                        resolution any
                    exit
                exit
            exit
            group "eBGP"
            exit
            group "iBGP"
                family ipv4 vpn-ipv4
                export "iBGP Export" 
                peer-as 65200
                neighbor 10.14.132.241
                exit
                neighbor 10.14.132.242
                exit
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "Network Security Zone Configuration"
#--------------------------------------------------
    exit

#--------------------------------------------------
echo "Source IP Address Configuration"
#--------------------------------------------------
    system
        security
            source-address
                application telnet "system"
                application ftp "system"
                application ssh "system"
                application snmptrap "system"
                application syslog "system"
                application ping "system"
                application traceroute "system"
            exit
        exit
    exit
#--------------------------------------------------
echo "Local DHCP Server (Base Router) Configuration"
#--------------------------------------------------
    router
        dhcp
            local-dhcp-server "Netrounds" create
                use-gi-address
                use-pool-from-client
                force-renews
                pool "10.14.132.40" create
                    options
                        dns-server 8.8.8.8 62.50.165.89
                        lease-time min 15
                    exit
                    subnet 10.14.132.40/29 create
                        options
                            subnet-mask 255.255.255.248
                            default-router 10.14.132.41
                        exit
                        address-range 10.14.132.42 10.14.132.44
                    exit
                exit
                pool "10.14.132.48" create
                    options
                        dns-server 8.8.8.8 62.50.165.89
                    exit
                    subnet 10.14.132.48/29 create
                        options
                            subnet-mask 255.255.255.248
                            default-router 10.14.132.49
                        exit
                        address-range 10.14.132.50 10.14.132.52
                    exit
                exit
                pool "10.14.132.56" create
                    options
                        dns-server 8.8.8.8 62.50.165.89
                    exit
                    subnet 10.14.132.56/29 create
                        options
                            subnet-mask 255.255.255.248
                            default-router 10.14.132.57
                        exit
                        address-range 10.14.132.58 10.14.132.59
                    exit
                exit
                no shutdown
            exit
        exit
    exit
#--------------------------------------------------
echo "System Sync-If-Timing Configuration"
#--------------------------------------------------
    system
        sync-if-timing
            begin
            ql-selection
            ref1
                source-ptp-clock csm
                no shutdown
            exit
            commit
        exit
    exit
#--------------------------------------------------
echo "System Time Configuration"
#--------------------------------------------------
    system
        time
            ntp
            exit
        exit
    exit
#--------------------------------------------------
echo "System IEEE 1588 PTP Configuration"
#--------------------------------------------------
    system
        ptp
            clock csm
                port 1/1/2 create
                    no shutdown
                exit
                port 1/1/4 create
                    no shutdown
                exit
                port 1/1/6 create
                    no shutdown
                exit
                no shutdown
            exit
        exit
    exit

exit all

# Finished WED FEB 26 19:51:18 2025 UTC

# TiMOS-B-23.4.R3 both/hops Nokia 7705 SAR Copyright (c) 2000-2023 Nokia.
# All rights reserved. All use subject to applicable license agreements.
# Built on Tue Aug 29 08:21:22 PDT 2023 by builder in /builds/F234B/R3/panos/main

# Generated WED FEB 26 19:51:18 2025 UTC

exit all
configure
#--------------------------------------------------
echo "System Configuration"
#--------------------------------------------------
    system
        name "SAR-Hc-243"
        dns
        exit
        ptp
            clock csm
                profile g8275dot1-2014
            exit
        exit
        rollback
            rollback-location "cf3:\RB"
        exit
        snmp
            packet-size 9216
        exit
        time
            ntp
                server 10.14.132.241 prefer
                server 10.14.132.242
                server 172.20.208.155
                server 172.20.208.156
                server 216.239.35.0
                no shutdown
            exit
            sntp
                shutdown
            exit
            zone UTC 
        exit
        thresholds
            rmon
            exit
        exit
        lldp
            tx-interval 10
            tx-hold-multiplier 2
            reinit-delay 5
            notification-interval 10
            tx-credit-max 20
            message-fast-tx 100
        exit
        script-control
            script "my-script-1"
                shutdown
            exit
            script-policy "my-spolicy-1"
                shutdown
                script "my-script-1"
            exit
        exit
    exit
#--------------------------------------------------
echo "System Security Configuration"
#--------------------------------------------------
    system
        security
            ftp-server
            management-access-filter
                ip-filter
                    shutdown
                    default-action permit
                    entry 10
                        description "test entry"
                        src-ip 10.144.0.0/21
                        action permit
                    exit
                    entry 20
                        description "test entry"
                        src-ip 10.152.0.0/20
                        action permit
                    exit
                    no shutdown
                exit
            exit
            password
                attempts 6 time 5 lockout 1
                health-check interval 600
                admin-password "$2y$10$hmHbHfSmEd08gcLWVHLy2.4M6TZPY6z37QlukE/RraWLmXFb3BsGO"
            exit
            radius
                authorization
                retry 4
                timeout 5
                server 1 address 172.20.208.159 secret "9Jt6uqZw3GsD3rwjUb7NlrPPwykd7ayqqiyS2TF6" hash2
            exit
            user "admin"
                password "$2y$10$pVSaboegIi7Mcey9nX6bw.Vz7UqUFz3myuLGFMZzzFXPCp3tHCZDK"
                access console ftp snmp 
                home-directory "cf3:\"
                console
                    member "administrative"
                exit
            exit
            user "ftp"
                password "$2y$10$zEwAG0SvcTT8JmSmDRUw6.bG8XtGIpJceYYia8cLkxHDIJC5PyCIi"
                access ftp 
                home-directory "cf3:\"
            exit
            user "sam_SNMPv3"
                password "$2y$10$MMyQ3X2130QoeMZ/923Xs.8zR5uWGzvkpHzdjJZNuZT8qEW0KtAke"
                access console snmp 
                snmp
                    authentication hash2 hmac-sha1-96 tq2YNDvPc+tt3+9OslxLvHPvQpPDVLAq4Sl6IDehgwtFtNaW privacy cbc-des 5Fj1fr1fN58vr1CQSBHr9a4DYL0WCsp7hOcMB7mqAwI=
                    group "SNMPv3_group"
                exit
            exit
            snmp
                access group "SNMPv3_group" security-model usm security-level privacy read "iso" write "iso" notify "iso"
                access group "SNMPv3_group" security-model usm security-level privacy context "vprn" prefix read "vprn-view" write "vprn-view" notify "iso"
            exit
            ssh
                preserve-key
            exit
        exit
    exit
#--------------------------------------------------
echo "System Login Control Configuration"
#--------------------------------------------------
    system
        login-control
            pre-login-message "|-----------------------------------------------------------------|\n| WARNING: Lab Unit Netnordic|\n| |\n|-----------------------------------------------------------------|\n"
        exit
    exit
#--------------------------------------------------
echo "Log Configuration"
#--------------------------------------------------
    log 
        snmp-trap-group 98
            description "5620sam"
            trap-target "000C29AA0275:main1" address 10.14.10.14 snmpv3 notify-community "sam_SNMPv3" security-level privacy
        exit 
        log-id 40
            no shutdown
        exit
        log-id 42
            from debug-trace 
            to memory
            no shutdown
        exit
        log-id 50
            from security 
            to memory
            no shutdown
        exit
        log-id 98
            from main security 
            to snmp 1024
            no shutdown
        exit
        event-handling
            handler "action-list"
                action-list
                    entry 10
                        script-policy "my-spolicy-1"
                        no shutdown
                    exit
                exit
                no shutdown
            exit
        exit
        event-trigger
            event "user" 2003
                trigger-entry 1
                    event-handler "action-list"
                    no shutdown
                exit
                no shutdown
            exit
        exit
    exit 
#--------------------------------------------------
echo "System Security Cpm Hw Filters and PKI Configuration"
#--------------------------------------------------
    system
        security
            cpm-filter
                ip-filter
                    entry 10 create
                        action accept
                        description "Permit TCP port 4000-4001 from SCADA FEP"
                        match protocol tcp
                            dst-port 4000 65534
                            src-ip 172.20.206.0/24
                        exit
                    exit
                    entry 20 create
                        action drop
                        description "Drop all TCP to port 4000-4001"
                        match protocol tcp
                            dst-port 4000 65534
                        exit
                    exit
                    no shutdown
                exit
            exit
        exit
    exit
#--------------------------------------------------
echo "VLAN-Filter Configuration"
#--------------------------------------------------
    filter
    exit
#--------------------------------------------------
echo "Group Encryption Configuration"
#--------------------------------------------------
    group-encryption
        group-encryption-label 34
        encryption-keygroup 1 create
            description "Key Group 1"
            keygroup-name "Key Group 1 vprn 330"
            esp-auth-algorithm sha512
            esp-encryption-algorithm aes256
            security-association spi 1 authentication-key 0x927233fec19bba051217bd4cf438e32650709dfcbdc45a77b2e89a22f9894e48468c2b1a273d70ff23674eade784f8baac53aed054ce28ca4495c1525c5cdb83a0968d1689fbb4ecb3bbb255bdd9e857 encryption-key 0x2f0ebf3393afc971db023ec479c371623b2880a92eb566c0539a82b86b605c13b0a02f389735324a7ea8c09ed21675d9 crypto
            active-outbound-sa 1
        exit
        encryption-keygroup 2 create
            description "Key Group 2"
            keygroup-name "Key Group 2 vprn 330"
            security-association spi 2 authentication-key 0xb626ffd746c00d2e45bf57039641e85330c121b1508e0f236bd6f2d92b3069f440bb7eecac184a7f635530688e50ac8b encryption-key 0x19b4755fe51870819a5bd45559f0195fc531d466f6ce28c6069319d464878b29 crypto
            active-outbound-sa 2
        exit
    exit
#--------------------------------------------------
echo "QoS Policy Configuration"
#--------------------------------------------------
    qos
    exit
#--------------------------------------------------
echo "QoS Policy Configuration"
#--------------------------------------------------
    qos
        sap-ingress 12 create
            description "Default SAP ingress QoS policy."
            queue 1 create
            exit
            queue 2 expedite create
            exit
            queue 4 create
            exit
            fc "ef" create
                queue 4
            exit
            default-priority high
        exit
        sap-ingress 300 create
            queue 1 create
            exit
            queue 2 create
            exit
            queue 3 create
            exit
            queue 4 create
            exit
            queue 5 create
            exit
            fc "af" create
                queue 4
            exit
            fc "be" create
                queue 1
            exit
            fc "ef" create
                queue 3
            exit
            fc "h2" create
                queue 2
                broadcast-queue 2
                multicast-queue 2
                unknown-queue 2
            exit
            fc "nc" create
                queue 5
            exit
            default-fc "h2"
            default-priority high
        exit
        sap-egress 12 create
            queue 1 create
            exit
            queue 6 create
            exit
            queue 7 create
            exit
            queue 8 create
            exit
            fc ef create
                queue 6
                dscp ef
            exit 
            fc h1 create
                queue 7
                dscp nc1
            exit 
        exit
        sap-egress 900 create
            policy-name "Hafslund-SAP-Egress-QoS"
            description "Hafslund-Sap-Egress-QoS-07012016"
            queue 1 create
            exit
            queue 2 create
            exit
            queue 3 create
            exit
            queue 4 create
            exit
            queue 5 create
            exit
            queue 6 create
            exit
            queue 7 create
            exit
            queue 8 create
            exit
            fc af create
                queue 3
                dscp in-profile af11 out-profile af12
            exit 
            fc be create
                queue 1
                dscp be
            exit 
            fc ef create
                queue 6
                dscp ef
            exit 
            fc h1 create
                queue 7
                dscp nc1
            exit 
            fc h2 create
                queue 5
                dscp in-profile af41 out-profile af42
            exit 
            fc l1 create
                queue 4
                dscp in-profile af21 out-profile af22
            exit 
            fc l2 create
                queue 2
                dscp cs1
            exit 
            fc nc create
                queue 8
                dscp nc2
            exit 
        exit
        mc-mlppp
        exit
        network 99 create
            ingress
            exit
            egress
            exit
        exit
        network 900 create
            description "Hafslund-Core-QoS-07012016"
            ingress
                dscp be fc be profile out
                dscp ef fc ef profile in
                dscp cs1 fc l2 profile in
                dscp nc1 fc h1 profile in
                dscp nc2 fc nc profile in
                dscp af11 fc af profile in
                dscp af12 fc af profile out
                dscp af13 fc af profile out
                dscp af21 fc l1 profile in
                dscp af22 fc l1 profile out
                dscp af23 fc l1 profile out
                dscp af31 fc l1 profile in
                dscp af32 fc l1 profile out
                dscp af33 fc l1 profile out
                dscp af41 fc h2 profile in
                dscp af42 fc h2 profile out
                dscp af43 fc h2 profile out
                lsp-exp 0 fc be profile out
                lsp-exp 1 fc l2 profile in
                lsp-exp 2 fc af profile out
                lsp-exp 3 fc af profile in
                lsp-exp 4 fc h2 profile in
                lsp-exp 5 fc ef profile in
                lsp-exp 6 fc h1 profile in
                lsp-exp 7 fc nc profile in
            exit
            egress
            exit
        exit
    exit
#--------------------------------------------------
echo "Card Configuration"
#--------------------------------------------------
    card 1
        card-type iom-sar
        mda 1
            mda-type i6-1gb
            no shutdown
        exit
        mda 2
            mda-type i2-sdi
            no shutdown
        exit
        no shutdown
    exit
#--------------------------------------------------
echo "Port Configuration"
#--------------------------------------------------
    port 1/1/1
        ethernet
            mode network
            mtu 2000
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/1/2
        description "To SAR-8-242 - 1/1/2 optical "
        ethernet
            mode network
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/1/3
        description "To HUA NE20-Core1 - 1/1/21"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 2000
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/1/4
        description "To SAR-8-242 - 1/1/3"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 2000
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
            phy-tx-clock slave
        exit
        no shutdown
    exit
    port 1/1/5
        description "LAB MGMT"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 1518
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/1/6
        description "To SAR-Hc-244 - 1/1/6"
        ethernet
            mode hybrid
            encap-type dot1q
            mtu 2000
            lldp
                dest-mac nearest-bridge
                    admin-status tx-rx
                    notification
                    tx-tlvs port-desc sys-name sys-desc sys-cap
                exit
            exit
            ssm
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/2/1
        serial
            rs232
                socket 1
                    no shutdown
                exit
                no shutdown
            exit
        exit
        no shutdown
    exit
    port 1/2/2
        shutdown
        serial
        exit
    exit
#--------------------------------------------------
echo "External Alarm Configuration"
#--------------------------------------------------
    external-alarms
    exit
#--------------------------------------------------
echo "Filter Configuration"
#--------------------------------------------------
    filter 
        ip-filter 10 create
            filter-name "SAP-QoS-Classification" 
            default-action forward
            description "SAP-QoS-Classification-07012016" 
            entry 16 create
                description "Digi Realport" 
                match protocol tcp
                    dst-port eq 771
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 18 create
                description "Digi Realport" 
                match protocol tcp
                    src-port eq 771
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 20 create
                description "IEC 104" 
                match protocol tcp
                    dst-port eq 2404
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 21 create
                description "IEC 104" 
                match protocol tcp
                    src-port eq 2404
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 22 create
                description "FROM_SCADA_AB" 
                match protocol ip
                    src-ip 10.145.0.0/16
                exit 
                action
                    forward fc h2
                exit
            exit 
            entry 23 create
                description "TO_SCADA_AB" 
                match protocol ip
                    dst-ip 10.145.0.0/16
                exit 
                action
                    forward fc h2
                exit
            exit 
            entry 24 create
                description "FROM_SCADA_OSLO" 
                match 
                    src-ip 10.153.0.0/16
                exit 
                action
                    forward fc h2
                exit
            exit 
            entry 25 create
                description "TO_SCADA_OSLO" 
                match 
                    dst-ip 10.153.0.0/16
                exit 
                action
                    forward fc h2
                exit
            exit 
            entry 34 create
                description "SSH" 
                match protocol tcp
                    dst-port eq 22
                exit 
                action
                    forward fc af
                exit
            exit 
            entry 35 create
                description "SSH" 
                match protocol tcp
                    src-port eq 22
                exit 
                action
                    forward fc af
                exit
            exit 
            entry 36 create
                description "RADIUS" 
                match protocol udp
                    dst-port eq 1812
                exit 
                action
                    forward fc af
                exit
            exit 
            entry 40 create
                description "DSCP_EF" 
                match 
                    dscp ef 
                exit 
                action
                    forward fc l1
                exit
            exit 
            entry 41 create
                description "DSCP_AF41" 
                match 
                    dscp af41 
                exit 
                action
                    forward fc l1
                exit
            exit 
            entry 42 create
                description "VoIP traffic" 
                match protocol udp
                    dst-port range 16834 32767
                exit 
                action
                    forward fc l1
                exit
            exit 
            entry 43 create
                description "SIP VoIP Signalling TCP" 
                match protocol tcp
                    dst-port range 5060 5061
                exit 
                action
                    forward fc l1
                exit
            exit 
            entry 44 create
                description "SIP VoIP Signalling CUP" 
                match protocol udp
                    dst-port range 5060 5061
                exit 
                action
                    forward fc l1
                exit
            exit 
            entry 100 create
                description "Default for remaining traffic" 
                action
                    forward fc be
                exit
            exit 
        exit 
        ip-filter 12 create
            default-action forward
            entry 8 create
                description "SSH" 
                match protocol tcp
                    dst-port eq 22
                exit 
                action
                    forward fc h1 priority high
                exit
            exit 
            entry 9 create
                match protocol tcp
                    src-port eq 22
                exit 
                action
                    forward fc h1 priority high
                exit
            exit 
            entry 10 create
                match protocol udp
                    dst-port eq 2404
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 11 create
                match protocol udp
                    src-port eq 2404
                exit 
                action
                    forward fc ef priority high
                exit
            exit 
            entry 100 create
                description "Default for remaining traffic" 
                action
                    forward fc be
                exit
            exit 
        exit 
    exit 
#--------------------------------------------------
echo "Network Security Configuration"
#--------------------------------------------------
    security
        logging
        exit
        begin
        commit
    exit
#--------------------------------------------------
echo "Management Router Configuration"
#--------------------------------------------------
    router management
    exit

#--------------------------------------------------
echo "Router (Network Side) Configuration"
#--------------------------------------------------
    router Base
        dhcp
            local-dhcp-server "Netrounds" create
            exit
        exit
        interface "To-SAR-8-242"
            address 10.14.132.141/30
            port 1/1/4:10
            no shutdown
        exit
        interface "To-SAR-8-242-p-1-1-2"
            address 10.14.132.134/30
            port 1/1/2
            bfd 10 receive 10 multiplier 3 type np
            no shutdown
        exit
        interface "To-SAR-Hc-244"
            address 10.14.0.9/30
            port 1/1/6:13
            bfd 10 receive 10 multiplier 3 type np
            no shutdown
        exit
        interface "system"
            address 10.14.132.243/32
            local-dhcp-server "Netrounds"
            bfd 100 receive 100 multiplier 3
            no shutdown
        exit
        interface "vlan31"
            address 10.14.132.169/30
            port 1/1/5:31
            no shutdown
        exit
        autonomous-system 65200
        ecmp 4
        router-id 10.14.132.243
#--------------------------------------------------
echo "Static Route Configuration"
#--------------------------------------------------
        static-route-entry 172.16.69.0/24
            next-hop 172.16.69.1
                shutdown
            exit
        exit
#--------------------------------------------------
echo "SGT Mapping Configuration"
#--------------------------------------------------
        sgt-qos
            application bgp dscp nc2 fc-queue nc profile in
            application icmp dscp be fc-queue l2 profile in
            application ldp dscp nc2 fc-queue nc profile in
            application rsvp dscp nc2 fc-queue nc profile in
            application ssh dscp nc1 fc-queue h1 profile in
            application isis dot1p 7 fc-queue nc profile in
            dscp be fc be
        exit
#--------------------------------------------------
echo "MPLS Label Range Configuration"
#--------------------------------------------------
        mpls-labels
            sr-labels start 20000 end 20999
        exit
#--------------------------------------------------
echo "OSPFv2 Configuration"
#--------------------------------------------------
        ospf
            shutdown
            reference-bandwidth 1000000
            area 0.0.0.0
                interface "system"
                    no shutdown
                exit
                interface "To-SAR-8-242"
                    no shutdown
                exit
                interface "To-SAR-Hc-244"
                    no shutdown
                exit
            exit
        exit
#--------------------------------------------------
echo "ISIS Configuration"
#--------------------------------------------------
        isis 0
            level-capability level-2
            area-id 49.0144
            overload-on-boot timeout 60
            traffic-engineering
            advertise-router-capability area
            loopfree-alternates
                remote-lfa
                exit
                ti-lfa
                exit
            exit
            level 1
                wide-metrics-only
            exit
            level 2
                preference 200
                wide-metrics-only
            exit
            interface "system"
                ipv4-node-sid index 243
                no shutdown
            exit
            interface "To-SAR-8-242"
                level 2
                    metric 200
                exit
                no shutdown
            exit
            interface "To-SAR-Hc-244"
                no shutdown
            exit
            interface "vlan31"
                no shutdown
            exit
            interface "To-SAR-8-242-p-1-1-2"
                no shutdown
            exit
            segment-routing
                prefix-sid-range global
                no shutdown
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "MPLS Configuration"
#--------------------------------------------------
        mpls
            interface "system"
                no shutdown
            exit
            interface "To-SAR-8-242"
                no shutdown
            exit
            interface "To-SAR-Hc-244"
                no shutdown
            exit
            interface "vlan31"
                no shutdown
            exit
            interface "To-SAR-8-242-p-1-1-2"
                no shutdown
            exit
        exit
#--------------------------------------------------
echo "RSVP Configuration"
#--------------------------------------------------
        rsvp
            interface "system"
                bfd-enable
                no shutdown
            exit
            interface "To-SAR-8-242"
                no shutdown
            exit
            interface "To-SAR-Hc-244"
                bfd-enable
                no shutdown
            exit
            interface "vlan31"
                no shutdown
            exit
            interface "To-SAR-8-242-p-1-1-2"
                bfd-enable
                no shutdown
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "MPLS LSP Configuration"
#--------------------------------------------------
        mpls
            path "DEFAULT"
                no shutdown
            exit
            path "PRIMARY"
                no shutdown
            exit
            path "STANDBY"
                no shutdown
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "LDP Configuration"
#--------------------------------------------------
        ldp
            interface-parameters
                interface "To-SAR-8-242" dual-stack
                    ipv4
                        no shutdown
                    exit
                    no shutdown
                exit
                interface "To-SAR-Hc-244" dual-stack
                    ipv4
                        no shutdown
                    exit
                    no shutdown
                exit
                interface "vlan31" dual-stack
                    ipv4
                        no shutdown
                    exit
                    no shutdown
                exit
                interface "To-SAR-8-242-p-1-1-2" dual-stack
                    ipv4
                        no shutdown
                    exit
                    no shutdown
                exit
            exit
            targeted-session
            exit
            no shutdown
        exit
    exit

#--------------------------------------------------
echo "Service Configuration"
#--------------------------------------------------
    service
        customer 1 create
            description "Default customer"
        exit
        vprn 50 customer 1 create
            interface "testloop" create
            exit
        exit
        vprn 100 customer 1 create
        exit
        vprn 300 customer 1 create
            interface "SIMULATE" create
            exit
        exit
        vprn 310 customer 1 create
            interface "scada310" create
            exit
        exit
        vprn 330 customer 1 create
            interface "scada330" create
            exit
        exit
        ies 400 customer 1 create
            interface "TO-HUALAB" create
            exit
        exit
        vprn 50 customer 1 create
            route-distinguisher 10.14.132.243:50
            auto-bind-tunnel
                resolution-filter
                    sr-isis
                exit
                resolution filter
            exit
            vrf-target export target:65535:50 import target:65535:50
            interface "testloop" create
                address 10.14.132.243/32
                loopback
            exit
            no shutdown
        exit
        vprn 100 customer 1 create
            vrf-import "100-HUB-IMPORT"
            vrf-export "100-HUB-EXPORT"
            autonomous-system 65200
            route-distinguisher 10.14.132.243:100
            auto-bind-tunnel
                resolution-filter
                    ldp
                    rsvp
                exit
                resolution any
            exit
            no shutdown
        exit
        vprn 300 customer 1 create
            vrf-import "SCADA1-FROM-HUB"
            vrf-export "SCADA1-FROM-CPE"
            route-distinguisher 10.14.132.243:300
            auto-bind-tunnel
                resolution-filter
                    ldp
                    rsvp
                exit
                resolution any
            exit
            interface "SIMULATE" create
                address 20.0.0.3/32
                loopback
            exit
            bgp
                no shutdown
            exit
            no shutdown
        exit
        vprn 310 customer 1 create
            vrf-export "VPRN310-EXPORT"
            route-distinguisher 10.0.0.243:310
            auto-bind-tunnel
                resolution-filter
                    ldp
                exit
                resolution any
            exit
            vrf-target export target:65400:3101 import target:65400:3100
            interface "scada310" create
                address 30.0.0.243/32
                loopback
            exit
            no shutdown
        exit
        vprn 330 customer 1 create
            route-distinguisher 10.0.0.243:330
            auto-bind-tunnel
                resolution-filter
                    ldp
                exit
                resolution any
            exit
            vrf-target target:65200:330
            interface "scada330" create
                address 33.0.0.243/32
                loopback
            exit
            no shutdown
        exit
        ies 400 customer 1 create
            interface "TO-HUALAB" create
                address 172.16.100.5/30
                sap 1/1/3:400 create
                exit
            exit
            no shutdown
        exit
    exit
#--------------------------------------------------
echo "CPM Filter Router and Svc-id Match Configuration"
#--------------------------------------------------
    system
        security
            cpm-filter
                ip-filter
                    no shutdown
                exit
            exit
        exit
    exit
#--------------------------------------------------
echo "Router (Service Side) Configuration"
#--------------------------------------------------
    router Base
#--------------------------------------------------
echo "OSPFv2 Configuration"
#--------------------------------------------------
        ospf
            shutdown
        exit
#--------------------------------------------------
echo "ISIS Configuration"
#--------------------------------------------------
        isis 0
            interface "TO-HUALAB"
                no shutdown
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "Policy Configuration"
#--------------------------------------------------
        policy-options
            begin
            prefix-list "All"
                prefix 0.0.0.0/0 longer
            exit
            community "SCADA1-COMM" members "target:65200:300"
            community "100-MAIN-COMM" members "target:65200:100"
            community "VPRN310-EXPORT" members "target:65400:3101"
            community "VPRN310-IMPORT" members "target:65400:3100"
            community "100-HUB-EXPORT-COMM" members "target:65200:100" "target:65200:10010"
            community "100-HUB-IMPORT-COMM" members "target:65200:10020"
            community "SCADA1-FROM-CPE-COMM" members "target:65200:30020"
            community "SCADA1-FROM-HUB-COMM" members "target:65200:30010"
            policy-statement "FG-Export"
                entry 10
                    from
                        protocol bgp-vpn
                    exit
                    to
                        protocol bgp
                    exit
                    action accept
                        as-path-prepend 65200 2
                    exit
                exit
                entry 20
                    from
                        protocol direct
                    exit
                    to
                        protocol bgp
                    exit
                    action accept
                        as-path-prepend 65200 2
                    exit
                exit
                entry 30
                    from
                        protocol aggregate
                    exit
                    to
                        protocol bgp
                    exit
                    action accept
                        as-path-prepend 65200 2
                    exit
                exit
                entry 40
                    action reject
                exit
            exit
            policy-statement "FG-Import"
                entry 10
                    from
                        protocol bgp
                        prefix-list "All"
                    exit
                    action accept
                        local-preference 130
                    exit
                exit
            exit
            policy-statement "100-HUB-EXPORT"
                entry 10
                    action accept
                        community add "100-HUB-EXPORT-COMM"
                    exit
                exit
                entry 20
                    action accept
                        community add "100-MAIN-COMM"
                    exit
                exit
            exit
            policy-statement "100-HUB-IMPORT"
                entry 10
                    from
                        community "100-HUB-IMPORT-COMM"
                    exit
                    action accept
                    exit
                exit
                entry 20
                    from
                        community "100-MAIN-COMM"
                    exit
                    action accept
                    exit
                exit
            exit
            policy-statement "VPRN310-EXPORT"
                entry 10
                    action accept
                        community add "VPRN310-EXPORT"
                    exit
                exit
            exit
            policy-statement "VPRN310-IMPORT"
                entry 10
                    from
                        community "VPRN310-IMPORT"
                    exit
                    action accept
                    exit
                exit
            exit
            policy-statement "SCADA1-FROM-CPE"
                entry 10
                    action accept
                        community add "SCADA1-FROM-CPE-COMM"
                    exit
                exit
            exit
            policy-statement "SCADA1-FROM-HUB"
                entry 10
                    from
                        community "SCADA1-FROM-HUB-COMM"
                    exit
                    action accept
                    exit
                exit
            exit
            commit
        exit
#--------------------------------------------------
echo "BGP Configuration"
#--------------------------------------------------
        bgp
            add-paths
                ipv4 send 2 receive
                vpn-ipv4 send 2 receive
            exit
            backup-path ipv4
            group "iBGP"
                family ipv4 vpn-ipv4
                next-hop-self
                peer-as 65200
                neighbor 10.14.132.241
                exit
                neighbor 10.14.132.242
                exit
            exit
            no shutdown
        exit
#--------------------------------------------------
echo "Network Security Zone Configuration"
#--------------------------------------------------
        zone 1 create
            begin
            nat
            exit
            inbound
                limit
                exit
            exit
            outbound
                limit
                exit
            exit
            commit
        exit
    exit

#--------------------------------------------------
echo "Source IP Address Configuration"
#--------------------------------------------------
    system
        security
            source-address
                application telnet "system"
                application ftp "system"
                application ssh "system"
                application snmptrap "system"
                application syslog "system"
                application traceroute "system"
            exit
        exit
    exit
#--------------------------------------------------
echo "Local DHCP Server (Base Router) Configuration"
#--------------------------------------------------
    router
        dhcp
            local-dhcp-server "Netrounds" create
                use-gi-address
                use-pool-from-client
                force-renews
                pool "10.14.132.66" create
                    options
                        dns-server 8.8.8.8 62.50.165.89
                    exit
                    subnet 10.14.132.64/29 create
                        options
                            subnet-mask 255.255.255.248
                            default-router 10.14.132.65
                        exit
                        address-range 10.14.132.66 10.14.132.68
                    exit
                exit
                no shutdown
            exit
        exit
    exit
#--------------------------------------------------
echo "System Sync-If-Timing Configuration"
#--------------------------------------------------
    system
        sync-if-timing
            begin
            ql-selection
            ref1
                source-ptp-clock csm
                no shutdown
            exit
            commit
        exit
    exit
#--------------------------------------------------
echo "System Time Configuration"
#--------------------------------------------------
    system
        time
            ntp
            exit
        exit
    exit
#--------------------------------------------------
echo "System IEEE 1588 PTP Configuration"
#--------------------------------------------------
    system
        ptp
            clock csm
                port 1/1/2 create
                    no shutdown
                exit
                port 1/1/4 create
                    no shutdown
                exit
                port 1/1/6 create
                    no shutdown
                exit
                no shutdown
            exit
        exit
    exit

exit all

# Finished WED FEB 26 19:51:18 2025 UTC
